<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{{#event}}{{ title }}{{/event}} :: Main</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="/assets/css/{{#cachebusting}}{{#themis}}{{ css }}{{/themis}}{{/cachebusting}}">
        {{#partials}}
        {{#favicons}}
        <!--=include {{{path}}} -->
        {{/favicons}}
        {{/partials}}
        <script type="text/x-metadata" data-name="event-title" data-value="{{#event}}{{ title }}{{/event}}"></script>
    </head>
    <body>
        <div class="navbar navbar-default navbar-static-top themis-navbar">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#themis-navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="/" class="navbar-brand" data-push-history>{{#event}}{{ title }}{{/event}}</a>
                </div>
                <div id="themis-navbar" class="collapse navbar-collapse">
                </div>
            </div>
        </div>
        <div id="themis-statusbar">
        </div>

        <div id="main">
        </div>

        <footer class="footer">
            {{#partials}}
            {{#footer}}
            <!--=include {{{path}}} -->
            {{/footer}}
            {{^footer}}
            <!--=include ../partials/footer.html -->
            {{/footer}}
            {{/partials}}
        </footer>

        <div class="themis-partials">
            <script type="text/x-template" data-name="loading-view">
                <div class="container">
                    <div class="text-center">
                        <p id="themis-view-loader" class="animated pulse infinite">Loading, please wait</p>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="event-log-unknown">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-muted">Unknown event <%- eventName %>!</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-contest">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <% if (contest.isInitial()) { %>
                    <span>Contest state has been set to <strong>Not started</strong></span>
                    <% } else if (contest.isStarted()) { %>
                    <span class="text-success">Contest state has been set to <strong>Started</strong></span>
                    <% } else if (contest.isPaused()) { %>
                    <span class="text-warning">Contest state has been set to <strong>Paused</strong></span>
                    <% } else if (contest.isFinished()) { %>
                    <span class="text-danger">Contest state has been set to <strong>Finished</strong></span>
                    <% } %>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-create-category">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-success">Category <strong><u><a class="text-success" href="/categories?action=scrollTo&categoryId=<%- category.id %>" target="_blank"><%- category.title %></a></u></strong> has been created</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-category">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Category <strong><u><a class="text-primary" href="/categories?action=scrollTo&categoryId=<%- category.id %>" target="_blank"><%- category.title %></a></u></strong> has been updated</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-delete-category">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-danger">Category <strong><%- category.title %></strong> has been deleted</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-create-post">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-success">Post <strong><u><a class="text-success" href="/news?action=scrollTo&amp;postId=<%- post.id %>" target="_blank"><%- post.title %></a></u></strong> has been created</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-post">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Post <strong><u><a class="text-primary" href="/news?action=scrollTo&amp;postId=<%- post.id %>" target="_blank"><%- post.title %></a></u></strong> has been updated</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-delete-post">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-danger">Post <strong><%- post.title %></strong> has been deleted</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-create-supervisor">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-success">Supervisor <strong><%- supervisor.username %></strong> has been created</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-delete-supervisor">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-danger">Supervisor <strong><%- supervisor.username %></strong> has been deleted</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-supervisor-password">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Supervisor <strong><%- supervisor.username %></strong> has updated its password</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-login-supervisor">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Supervisor <strong><%- supervisor.username %></strong> has logged in</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-logout-supervisor">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Supervisor <strong><%- supervisor.username %></strong> has logged out</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-create-task">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-success">Task <strong><%- task.title %></strong> has been created</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-task">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Task <strong><%- task.title %></strong> has been updated</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-open-task">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Task <strong><%- task.title %></strong> has been opened</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-close-task">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-danger">Task <strong><%- task.title %></strong> has been closed</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-create-task-category">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-success">Category <strong><%- category.title %></strong> has been attached to the task <strong><%- task.title %></strong></span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-delete-task-category">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-danger">Category <strong><%- category.title %></strong> has been detached from the task <strong><%- task.title %></strong></span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-create-team">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-success">Team <strong><u><a class="text-success" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has registered for the competition</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-team-email">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Team <strong><u><a class="text-primary" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has updated its email</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-team-profile">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Team <strong><u><a class="text-primary" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has updated its profile</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-team-password">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Team <strong><u><a class="text-primary" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has changed its password</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-team-logo">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Team <strong><u><a class="text-primary" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has uploaded another logo</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-qualify-team">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-success">Team <strong><u><a class="text-success" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has qualified for the competition</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-disqualify-team">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-danger">Team <strong><u><a class="text-danger" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has been disqualified</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-login-team">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Team <strong><u><a class="text-primary" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has logged in</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-logout-team">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Team <strong><u><a class="text-primary" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has logged out</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-update-team-score">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-primary">Team <strong><u><a class="text-primary" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> score has been adjusted to <strong><%- teamScore.score %></strong> points</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-create-team-task-hit">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-success">Team <strong><u><a class="text-success" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has just solved the task <strong><%- task.title %></strong> and has earned <strong><%- task.value %></strong> points</span>
                </p>
            </script>

            <script type="text/x-template" data-name="event-log-create-team-task-hit-attempt">
                <p>
                    <span><code><%- createdAt %></code>&nbsp;&nbsp;</span>
                    <span class="text-warning">Team <strong><u><a class="text-warning" href="/team/<%- team.id %>/profile" target="_blank"><%- team.name %></a></u></strong> has provided wrong answer <strong><%- teamTaskHitAttempt.wrongAnswer %></strong> for the task <strong><%- task.title %></strong></span>
                </p>
            </script>

            <script type="text/x-template" data-name="navbar-view">
                <ul class="nav navbar-nav">
                    <li class="<% print((active === 'teams') ? 'active' : ''); %>">
                        <a href="/teams" data-push-history>Teams</a>
                    </li>
                    <li class="<% print((active === 'news') ? 'active' : ''); %>">
                        <a href="/news" data-push-history>News</a>
                    </li>
                    <li class="<% print((active === 'scoreboard') ? 'active' : ''); %>">
                        <a href="/scoreboard" data-push-history>Scoreboard</a>
                    </li>
                    <% if (identity && identity.isSupervisor()) { %>
                    <li class="<% print((active === 'categories') ? 'active' : ''); %>">
                        <a href="/categories" data-push-history>Categories</a>
                    </li>
                    <% } %>
                    <li class="<% print((active === 'tasks') ? 'active' : ''); %>">
                        <a href="/tasks" data-push-history>Tasks</a>
                    </li>
                    <li class="<% print((active === 'about') ? 'active' : ''); %>">
                        <a href="/about" data-push-history>About</a>
                    </li>
                    <% if (identity && identity.isSupervisor()) { %>
                    <li class="<% print((active === 'events') ? 'active' : ''); %>">
                        <a href="/events" data-push-history>Events</a>
                    </li>
                    <% } %>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <% if (identity === null || identity.isGuest()) { %>
                    <li class="<% print((active === 'signin') ? 'active' : ''); %>"><a href="/team/signin" data-push-history>Sign in</a></li>
                    <% } else { %>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                            <% if (identity.isAdmin()) { %>
                            <span class="label label-success">A</span>
                            <% } else if (identity.isManager()) { %>
                            <span class="label label-primary">M</span>
                            <% } else if (identity.isTeam()) { %>
                            <img class="profile-image" src="/api/team/<%- identity.id %>/logo">
                            <% } %>
                            <%- identity.name %>&nbsp;<span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <% if (identity.isTeam()) { %>
                            <li><a href="/team/<%- identity.id %>/profile" data-push-history><span class="glyphicon glyphicon-cog"></span>&nbsp;Edit profile</a></li>
                            <% } %>
                            <li><a href="#" data-action="signout" data-push-history><span class="glyphicon glyphicon-log-out"></span>&nbsp;Sign out</a></li>
                        </ul>
                    </li>
                    <% } %>
                </ul>
            </script>

            <script type="text/x-template" data-name="team-profile-simplified-partial">
                <div class="clearfix themis-profile">
                    <div class="pull-left logo">
                        <img class="img-thumbnail" src="/api/team/<%- team.id %>/logo">
                    </div>
                    <div class="pull-left info">
                        <h4 class="text-primary">
                            <a href="/team/<%- team.id %>/profile" data-push-history><%- team.name %></a>
                            <% if (team.disqualified) { %>&nbsp;<span class="label label-danger">disqualified</span><% } %>
                        </h4>
                        <ul class="list-unstyled">
                            <% if ('email' in team && typeof team.email !== 'undefined' && team.email !== null) { %>
                            <li>
                                <span class="glyphicon glyphicon-envelope"></span>
                                <% if (team.emailConfirmed) { %>
                                <span class="text-success" title="Email verified"><%- team.email %></span>
                                <% } else { %>
                                <span class="text-danger" title="Email not verified"><%- team.email %></span>
                                <% } %>
                            </li>
                            <% } %>
                        </ul>
                        <ul class="list-unstyled">
                            <% if (country !== '') { %>
                            <li><strong>Country:</strong> <%- country %></li>
                            <% } %>
                            <% if (team.locality !== '') { %>
                            <li><strong>Locality:</strong> <%- team.locality %></li>
                            <% } %>
                            <% if (team.institution !== '') { %>
                            <li><strong>Institution:</strong> <%- team.institution %></li>
                            <% } %>
                        </ul>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="team-count-partial">
                <span>&nbsp;(<%- count %>)</span>
            </script>

            <script type="text/x-template" data-name="teams-view">
                <div class="container">
                    <% if (identity.isTeam() && !identity.emailConfirmed) { %>
                    <!--=include ../partials/alert_email_verification.html -->
                    <% } %>
                    <header>
                        <h2>Teams<span class="themis-team-count"></span></h2>
                    </header>
                    <section>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="category-supervisor-partial">
                <div class="themis-category" data-id="<%- id %>">
                    <header>
                        <h4><%- title %></h4>
                    </header>
                    <section>
                        <p><%- description %></p>
                    </section>
                    <footer>
                        <p class="text-muted"><small>Updated on <%- updatedAt %></small>
                            <% if (manageable) { %>
                            &nbsp;
                            <button type="button" class="btn btn-default btn-xs" data-action="edit-category" data-toggle="modal" data-target="#edit-category-modal" data-category-id="<%- id %>">
                                Edit
                            </button>
                            <button type="button" class="btn btn-danger btn-xs" data-action="delete-category" data-toggle="modal" data-target="#delete-category-modal" data-category-id="<%- id %>">
                                Delete
                            </button>
                            <% } %>
                        </p>
                    </footer>
                </div>
            </script>

            <script type="text/x-template" data-name="delete-category-confirmation">
                You are about to delete the category <mark><%- title %></mark>. Continue?
            </script>

            <script type="text/x-template" data-name="edit-task-hint-textarea-partial">
                <div class="themis-task-hint-group" id="edit-task-hint-<%- number %>" data-state-disabled="<% print(editable ? 'false' : 'true') %>">
                    <h5>
                        Hint #<%- number %>
                        <% if (editable) { %>
                        <a href="#" data-action="remove-task-hint" data-number="<%- number %>">
                            <i class="glyphicon glyphicon-remove text-danger"></i>
                        </a>
                        <% } %>
                    </h5>
                    <textarea class="form-control" required data-parsley-length="[2,1024]"<% print(editable ? '' : ' disabled'); %>><%- hint %></textarea>
                </div>
            </script>

            <script type="text/x-template" data-name="create-task-hint-textarea-partial">
                <div class="themis-task-hint-group" id="create-task-hint-<%- number %>">
                    <h5>
                        Hint #<%- number %>
                        <a href="#" data-action="remove-task-hint" data-number="<%- number %>">
                            <i class="glyphicon glyphicon-remove text-danger"></i>
                        </a>
                    </h5>
                    <textarea class="form-control" required data-parsley-length="[2,1024]"><%- hint %></textarea>
                </div>
            </script>

            <script type="text/x-template" data-name="edit-task-answer-input-partial">
                <div id="edit-task-answer-<%- number %>">
                    <div class="input-group themis-task-answer-group" data-state-disabled="<% print(editable ? 'false' : 'true') %>">
                        <div class="input-group-addon"><%- number %></div>
                        <input type="text" class="form-control" required data-parsley-errors-container="#edit-task-answer-errors-<%- number %>" data-parsley-length="[2,256]" value="<%- answer %>"<% print(editable ? '' : ' disabled'); %>>
                        <div class="input-group-addon checkbox">
                            <label>
                                <input type="checkbox" data-parsley-excluded="true" value=""<% print(caseSensitive ? ' checked' : '') %><% print(editable ? '' : ' disabled'); %>>
                                Aa
                            </label>
                        </div>
                        <% if (editable) { %>
                        <div class="input-group-addon">
                            <a href="#" data-action="remove-task-answer" data-number="<%- number %>">
                                <i class="glyphicon glyphicon-remove text-danger"></i>
                            </a>
                        </div>
                        <% } %>
                    </div>
                    <div id="edit-task-answer-errors-<%- number %>">
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="create-task-answer-input-partial">
                <div id="create-task-answer-<%- number %>">
                    <div class="input-group themis-task-answer-group" >
                        <div class="input-group-addon"><%- number %></div>
                        <input type="text" class="form-control" required data-parsley-errors-container="#create-task-answer-errors-<%- number %>" data-parsley-length="[2,256]" value="<%- answer %>">
                        <div class="input-group-addon checkbox">
                            <label>
                                <input type="checkbox" data-parsley-excluded="true" value=""<% print(caseSensitive ? ' checked' : '') %>>
                                Aa
                            </label>
                        </div>
                        <div class="input-group-addon">
                            <a href="#" data-action="remove-task-answer" data-number="<%- number %>">
                                <i class="glyphicon glyphicon-remove text-danger"></i>
                            </a>
                        </div>
                    </div>
                    <div id="create-task-answer-errors-<%- number %>">
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="category-partial">
                <span class="label label-default" title="<%- description %>"><span class="glyphicon glyphicon-tag"></span>&nbsp;<%- title %></span>&nbsp;
            </script>

            <script type="text/x-template" data-name="check-task-guest-error">
                You must be authorized in order to view the task and submit answers. Please <u><a class="text-danger" href="/team/signin">sign in</a></u>. If you have not registered yet, please <u><a class="text-danger" href="/team/signup">sign up</a></u>.
            </script>

            <script type="text/x-template" data-name="task-content-partial">
                <div>
                    <header>
                        <h4><%- title %></h4>
                    </header>
                    <section>
                        <%= description %>
                    </section>
                    <% if (hints.length > 0) { %>
                    <section>
                        <h5>Hints</h5>
                        <ol>
                            <% for (var i=0; i<hints.length; ++i) { %>
                            <li><%= hints[i] %>
                            <% } %>
                        </ol>
                    </section>
                    <% } %>
                </div>
            </script>

            <script type="text/x-template" data-name="task-preview-partial">
                <div class="col-sm-3 themis-task-preview-container" data-task-id="<%- task.id %>">
                    <% if (task.isInitial()) { %>
                    <div class="panel panel-default">
                    <% } else if (task.isOpened() && !taskIsSolved) { %>
                    <div class="panel panel-info">
                    <% } else if (task.isClosed() && !taskIsSolved) { %>
                    <div class="panel panel-danger">
                    <% } else if ((task.isOpened() || task.isClosed()) && taskIsSolved) { %>
                    <div class="panel panel-success">
                    <% } %>
                        <div class="panel-heading">
                            <h4 class="panel-title themis-task-title">
                                <%- task.title %>
                                &nbsp;
                                <% if (identity.isAdmin()) { %>
                                    <% if (!task.isClosed() && !contest.isFinished()) { %>
                                    <a href="#" data-action="edit-task" data-toggle="modal" data-target="#edit-task-modal" data-task-id="<%- task.id %>" title="Edit task"><span class="glyphicon glyphicon-edit"></span></a>
                                    <% } %>
                                    <% if (contest.isStarted()) { %>
                                        <% if (task.isInitial()) { %>
                                        <a href="#" data-action="open-task" data-toggle="modal" data-target="#open-task-modal" data-task-id="<%- task.id %>" title="Open task"><span class="glyphicon glyphicon-eye-open"></span></a>
                                        <% } else if (task.isOpened()) { %>
                                        <a href="#" data-action="close-task" data-toggle="modal" data-target="#close-task-modal" data-task-id="<%- task.id %>" title="Close task"><span class="glyphicon glyphicon-eye-close"></span></a>
                                        <% } %>
                                    <% } %>
                                <% } %>
                                <% if (identity.isSupervisor()) { %>
                                <a href="/task/<%- task.id %>/statistics" target="_blank" title="Task statistics"><span class="glyphicon glyphicon-dashboard"></span></a>
                                <% } %>
                            </h4>
                        </div>
                        <% if (identity.isSupervisor()) { %>
                        <div class="panel-body" data-task-id="<%- task.id %>" data-toggle="modal" data-target="#revise-task-modal">
                        <% } else if (identity.isTeam()) { %>
                        <div class="panel-body" data-task-id="<%- task.id %>" data-toggle="modal" data-target="#submit-task-modal">
                        <% } else { %>
                        <div class="panel-body" data-task-id="<%- task.id %>" data-toggle="modal" data-target="#check-task-modal">
                        <% } %>
                            <div class="themis-task-value">
                                <%- task.value %>
                            </div>
                        </div>
                        <% if (identity.isSupervisor()) { %>
                        <div class="panel-footer" data-task-id="<%- task.id %>" data-toggle="modal" data-target="#revise-task-modal">
                        <% } else if (identity.isTeam()) { %>
                        <div class="panel-footer" data-task-id="<%- task.id %>" data-toggle="modal" data-target="#submit-task-modal">
                        <% } else { %>
                        <div class="panel-footer" data-task-id="<%- task.id %>" data-toggle="modal" data-target="#check-task-modal">
                        <% } %>
                            <div class="themis-categories">
                                <%= categoriesList %>
                            </div>
                        </div>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="open-task-confirmation">
                You are about to open the task <mark><%- title %></mark>.
                Teams will be able to submit answers for the task. Continue?
            </script>

            <script type="text/x-template" data-name="close-task-confirmation">
                You are about to close the task <mark><%- title %></mark>.
                Teams will not be able to submit answers for the task though
                scores earned will not be recalculated. Continue?
            </script>

            <script type="text/x-template" data-name="categories-view">
                <div class="container">
                    <header>
                        <h1>Categories</h1>
                    </header>
                    <section>
                        <% if (identity.isAdmin() && !contest.isFinished()) { %>
                        <button type="button" class="btn btn-success" data-action="create-category" data-toggle="modal" data-target="#create-category-modal">
                            Create
                        </button>
                        <% } %>
                        <div id="themis-categories-list"></div>
                    </section>
                </div>

                <% if (identity.isAdmin() && !contest.isFinished()) { %>
                <div class="modal fade" id="create-category-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Create task category</h4>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="/api/category/create">
                                    <div class="form-group">
                                        <label for="create-category-title" class="control-label">Title</label>
                                        <input type="text" class="form-control" id="create-category-title" name="title" autofocus required minlength="2" maxlength="20">
                                    </div>
                                    <div class="form-group">
                                        <label for="create-category-description" class="control-label">Description</label>
                                        <textarea class="form-control themis-category-description" id="create-category-description" minlength="0" maxlength="150" name="description"></textarea>
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-create-category">Create</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="delete-category-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Delete category</h4>
                            </div>
                            <div class="modal-body">
                                <p class="confirmation"></p>
                                <div class="submit-error">
                                    <p class="text-danger"></p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-danger" data-action="complete-delete-category">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="edit-category-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Edit task category</h4>
                            </div>
                            <div class="modal-body">
                                <form method="POST">
                                    <div class="form-group">
                                        <label for="edit-category-title" class="control-label">Title</label>
                                        <input type="text" class="form-control" id="edit-category-title" name="title" autofocus required minlength="2" maxlength="20">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-category-description" class="control-label">Description</label>
                                        <textarea class="form-control themis-category-description" id="edit-category-description" minlength="0" maxlength="150" name="description"></textarea>
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-edit-category">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>
            </script>

            <script type="text/x-template" data-name="tasks-view">
                <div class="container">
                    <% if (identity.isTeam() && !identity.emailConfirmed) { %>
                    <!--=include ../partials/alert_email_verification.html -->
                    <% } %>
                    <header>
                        <h1>Tasks</h1>
                    </header>
                    <section>
                        <% if (identity.isAdmin() && !contest.isFinished()) { %>
                        <div class="themis-task-controls">
                            <button type="button" class="btn btn-success" data-action="create-task" data-toggle="modal" data-target="#create-task-modal">
                                Create
                            </button>
                        </div>
                        <% } %>
                        <div id="themis-task-previews" class="clearfix">
                        </div>
                    </section>
                </div>

                <% if (identity.isTeam()) { %>
                <div class="modal fade" id="submit-task-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Submit task</h4>
                            </div>
                            <div class="modal-body">
                                <div class="themis-task-contents">
                                </div>
                            </div>
                            <div class="modal-body">
                                <form method="POST" data-target="submit">
                                    <div class="form-group" id="submit-task-field-group">
                                        <label for="submit-task-answer" class="control-label">Answer</label>
                                        <input type="text" class="form-control" id="submit-task-answer" name="answer" required data-parsley-length="[2,256]">
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                    <div class="submit-info">
                                        <p class="text-info"></p>
                                    </div>
                                    <div class="submit-success">
                                        <p class="text-success"></p>
                                    </div>
                                </form>
                                <form method="POST" data-target="review">
                                    <div class="form-group" id="review-task-field-group">
                                        <hr>
                                        <p><strong>We would greatly appreciate your feedback!</strong></p>
                                        <label for="review-task-rating" class="control-label">Rating</label>
                                        <select class="form-control" id="review-task-rating" name="rating" required>
                                            <option value="5">5 &ndash; Excellent</option>
                                            <option value="4">4 &ndash; Good</option>
                                            <option value="3">3 &ndash; Average</option>
                                            <option value="2">2 &ndash; Fair</option>
                                            <option value="1">1 &ndash; Poor</option>
                                        </select>
                                        <label for="review-task-comment" class="control-label">Comment</label>
                                        <textarea class="form-control" id="review-task-comment" name="comment" required data-parsley-length="[0,300]"></textarea>
                                        <p class="text-muted">
                                            <small>
                                                Note that your comment may be posted publicly. Please avoid obscene language.
                                                <br>
                                                You can submit only one review on your team's behalf. It can't be altered afterwards.
                                            </small>
                                        </p>
                                    </div>
                                    <div class="review-error">
                                        <p class="text-danger"></p>
                                    </div>
                                    <div class="review-success">
                                        <p class="text-success"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-submit-task">Submit</button>
                                <button type="button" class="btn btn-primary" data-action="complete-review-task">Submit review</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>

                <% if (identity.isGuest() || identity.isTeam()) { %>
                <div class="modal fade" id="check-task-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Check task</h4>
                            </div>
                            <div class="modal-body">
                                <div class="themis-task-contents">
                                </div>
                            </div>
                            <div class="modal-body">
                                <form method="POST">
                                    <div class="form-group" id="check-task-answer-group">
                                        <label for="check-task-answer" class="control-label">Answer</label>
                                        <input type="text" class="form-control" id="check-task-answer" name="answer" required data-parsley-length="[2,256]">
                                        <span class="help-block" id="check-task-status"></span>
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                    <div class="submit-success">
                                        <p class="text-success"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-check-task">Check</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>

                <% if (identity.isSupervisor()) { %>
                <div class="modal fade" id="revise-task-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Revise task</h4>
                            </div>
                            <div class="modal-body">
                                <div class="themis-task-contents">
                                </div>
                            </div>
                            <div class="modal-body">
                                <form method="POST">
                                    <div class="form-group" id="revise-task-answer-group">
                                        <label for="revise-task-answer" class="control-label">Answer</label>
                                        <input type="text" class="form-control" id="revise-task-answer" name="answer" required data-parsley-length="[2,256]">
                                    </div>
                                    <div>
                                        <p class="text-info" id="revise-task-status"></p>
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                    <div class="submit-success">
                                        <p class="text-success"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-revise-task">Check</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>

                <% if (identity.isAdmin()) { %>
                <div class="modal fade" id="open-task-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Open task</h4>
                            </div>
                            <div class="modal-body">
                                <p class="confirmation"></p>
                                <div class="submit-error">
                                    <p class="text-danger"></p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                                <button type="button" class="btn btn-success" data-action="complete-open-task">Yes</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>

                <% if (identity.isAdmin()) { %>
                <div class="modal fade" id="close-task-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Close task</h4>
                            </div>
                            <div class="modal-body">
                                <p class="confirmation"></p>
                                <div class="submit-error">
                                    <p class="text-danger"></p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                                <button type="button" class="btn btn-danger" data-action="complete-close-task">Yes</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>

                <% if (identity.isAdmin()) { %>
                <div class="modal fade" id="create-task-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Create task</h4>
                            </div>
                            <div class="modal-body">
                                <div>
                                    <ul class="nav nav-tabs" id="create-task-tablist">
                                        <li><a href="#create-task-data" role="tab" data-toggle="tab">Data</a></li>
                                        <li><a href="#create-task-preview" role="tab" data-toggle="tab">Preview</a></li>
                                    </ul>

                                    <div class="tab-content">
                                        <div role="tabpanel" class="tab-pane" id="create-task-data">
                                            <form method="POST" action="/api/task/create">
                                                <div class="container-fluid">
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label for="create-task-title" class="control-label">Title</label>
                                                            <input type="text" class="form-control" id="create-task-title" required minlength="2" maxlength="50" name="title">
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="create-task-description" class="control-label">Description</label>
                                                            <textarea class="form-control themis-task-description" id="create-task-description" required minlength="2" maxlength="4096" name="description"></textarea>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="create-task-value" class="control-label">Value</label>
                                                            <input type="number" class="form-control" id="create-task-value" name="value" required data-parsley-type="integer" data-parsley-min="10" data-parsley-max="1000">
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="create-categories" class="control-label">Categories</label>
                                                            <select class="form-control" multiple size="5" id="create-categories" required name="categories"></select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group" id="create-task-hints">
                                                            <label class="control-label">
                                                                Hints
                                                                &nbsp;
                                                                <a href="#" data-action="create-task-hint">
                                                                    <i class="glyphicon glyphicon-plus text-success"></i>
                                                                </a>
                                                            </label>
                                                            <div id="create-task-hint-list">
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="create-task-answers">
                                                            <label class="control-label">
                                                                Answers
                                                                &nbsp;
                                                                <a href="#" data-action="create-task-answer">
                                                                    <i class="glyphicon glyphicon-plus text-success"></i>
                                                                </a>
                                                            </label>
                                                            <div id="create-task-answer-list">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="submit-error">
                                                    <p class="text-danger"></p>
                                                </div>
                                            </form>
                                        </div>
                                        <div role="tabpanel" class="tab-pane" id="create-task-preview">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-create-task">Create</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>

                <% if (identity.isAdmin()) { %>
                <div class="modal fade" id="edit-task-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Edit task</h4>
                            </div>
                            <div class="modal-body">
                                <div>
                                    <ul class="nav nav-tabs" id="edit-task-tablist">
                                        <li><a href="#edit-task-data" role="tab" data-toggle="tab">Data</a></li>
                                        <li><a href="#edit-task-preview" role="tab" data-toggle="tab">Preview</a></li>
                                    </ul>

                                    <div class="tab-content">
                                        <div role="tabpanel" class="tab-pane" id="edit-task-data">
                                            <form method="POST">
                                                <div class="container-fluid">
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label for="edit-task-title" class="control-label">Title</label>
                                                            <input type="text" class="form-control" id="edit-task-title" required minlength="2" maxlength="50" name="title" disabled>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="edit-task-description" class="control-label">Description</label>
                                                            <textarea class="form-control themis-task-description" id="edit-task-description" required minlength="2" maxlength="4096" name="description"></textarea>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="edit-task-value" class="control-label">Value</label>
                                                            <input type="number" class="form-control" id="edit-task-value" name="value" required data-parsley-type="integer" data-parsley-min="10" data-parsley-max="1000" disabled>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="edit-categories" class="control-label">Categories</label>
                                                            <select class="form-control" multiple size="5" id="edit-categories" required name="categories"></select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group" id="edit-task-hints">
                                                            <label class="control-label">
                                                                Hints
                                                                &nbsp;
                                                                <a href="#" data-action="create-task-hint">
                                                                    <i class="glyphicon glyphicon-plus text-success"></i>
                                                                </a>
                                                            </label>
                                                            <div id="edit-task-hint-list">
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="edit-task-answers">
                                                            <label class="control-label">
                                                                Answers
                                                                &nbsp;
                                                                <a href="#" data-action="create-task-answer">
                                                                    <i class="glyphicon glyphicon-plus text-success"></i>
                                                                </a>
                                                            </label>
                                                            <div id="edit-task-answer-list">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="submit-error">
                                                    <p class="text-danger"></p>
                                                </div>
                                            </form>
                                        </div>
                                        <div role="tabpanel" class="tab-pane" id="edit-task-preview">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-edit-task">Update</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>
            </script>

            <script type="text/x-template" data-name="scoreboard-table-row-partial">
                <tr class="themis-scoreboard-row<% print(highlight ? ' info': ''); %>">
                    <td><%- rank %></td>
                    <td>
                        <img class="themis-scoreboard-logo" src="/api/team/<%- id %>/logo">
                        <a href="/team/<%- id %>/profile" class="themis-team-link" data-push-history><%- name %></a>
                    </td>
                    <td><%- country %></td>
                    <% if (detailed) { %>
                    <td><%- locality %></td>
                    <td><%- institution %></td>
                    <% } %>
                    <td><%- score %></td>
                    <td><%- updatedAt %></td>
                </tr>
            </script>

            <script type="text/x-template" data-name="scoreboard-view">
                <div class="container">
                    <% if (identity.isTeam() && !identity.emailConfirmed) { %>
                    <!--=include ../partials/alert_email_verification.html -->
                    <% } %>
                    <header>
                        <h1>Scoreboard</h1>
                    </header>
                    <section>
                        <table class="table table-condensed">
                            <thead>
                                <th>#</th>
                                <th>Team</th>
                                <th>Country</th>
                                <% if (detailed) { %>
                                <th>Locality</th>
                                <th>Institution</th>
                                <% } %>
                                <th>Score</th>
                                <th>Last updated</th>
                            </thead>
                            <tbody id="themis-scoreboard-table-body">
                            </tbody>
                        </table>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="contest-state-partial">
                <% if (contest.isInitial()) { %>
                    <span class="themis-contest-not-started">
                        &#9679;&nbsp;Not started
                    </span>
                <% } else if (contest.isStarted()) { %>
                    <span class="themis-contest-started">
                        &#9679;&nbsp;Started
                    </span>
                <% } else if (contest.isPaused()) { %>
                    <span class="themis-contest-paused">
                        &#9679;&nbsp;Paused
                    </span>
                <% } else if (contest.isFinished()) { %>
                    <span class="themis-contest-finished">
                        &#9679;&nbsp;Finished
                    </span>
                <% } %>
                <% if (identity.isAdmin()) { %>
                <a href="#" class="text-info" data-action="update-contest" data-toggle="modal" data-target="#update-contest-modal">
                    <i class="glyphicon glyphicon-cog"></i>
                </a>
                <% } %>
            </script>

            <script type="text/x-template" data-name="contest-timer-initial">
                <span class="text-info">Contest starts on <%- startsAt %> (<%- interval %>)</span>
            </script>

            <script type="text/x-template" data-name="contest-timer-started">
                <span class="text-info">Contest finishes on <%- finishesAt %> (<%- interval %>)</span>
            </script>

            <script type="text/x-template" data-name="contest-timer-paused">
                <span class="text-info">Contest is paused</span>
            </script>

            <script type="text/x-template" data-name="contest-timer-finished">
                <span class="text-info">Contest has finished on <%- finishesAt %> (<%- interval %>)</span>
            </script>

            <script type="text/x-template" data-name="contest-realtime-state">
                <% if (state === 'connecting') { %>
                    <span class="text-warning" data-toggle="tooltip" data-placement="top" title="Your browser is making an attempt to establish the connection to the realtime update channel.">
                        &#9679;&nbsp;Stream: connecting
                    </span>
                <% } else if (state === 'connected') { %>
                    <span class="text-success" data-toggle="tooltip" data-placement="top" title="Your browser has established the connection to the realtime update channel. You don't need to reload the page.">
                        &#9679;&nbsp;Stream: connected
                    </span>
                <% } else if (state === 'closed') { %>
                    <span class="text-danger" data-toggle="tooltip" data-placement="top" title="Connection to the realtime update channel has been closed. In order to get the latest updates you have to reload the page.">
                        &#9679;&nbsp;Stream: closed
                    </span>
                <% } else if (state === 'not-supported') { %>
                    <span class="text-muted" data-toggle="tooltip" data-placement="top" title="Your browser doesn't support Server-Sent Events. In order to get the latest updates you have to reload the page from time to time.">
                        &#9679;&nbsp;Stream: not supported
                    </span>
                <% } else if (state === 'n/a') { %>
                    <span class="text-muted" data-toggle="tooltip" data-placement="top" title="Unknown error. Please reload the page.">
                        &#9679;&nbsp;Stream: n/a
                    </span>
                <% } %>
            </script>

            <script type="text/x-template" data-name="contest-score">
                <span class="text-info"><em>rank:</em>&nbsp;<strong><%- teamRank %></strong></span>&nbsp;&nbsp;&nbsp;<span class="text-info"><em>points:</em>&nbsp;<strong><%- teamScore %></strong></span>
            </script>

            <script type="text/x-template" data-name="statusbar-view">
                <div class="container themis-statusbar">
                    <div class="row">
                        <div class="col-md-3" id="themis-contest-state">
                        </div>
                        <div class="col-md-6" id="themis-contest-timer">
                        </div>
                        <div class="col-md-3" id="themis-contest-score">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3" id="themis-realtime-state">
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="update-contest-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Update contest</h4>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="/api/contest/update">
                                    <div class="form-group">
                                        <label for="update-contest-state" class="control-label">State</label>
                                        <select id="update-contest-state" class="form-control" name="state" autofocus required>
                                            <option value="1">Not started</option>
                                            <option value="2">Started</option>
                                            <option value="3">Paused</option>
                                            <option value="4">Finished</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="update-contest-starts" class="control-label">Starts at</label>
                                        <div class='input-group date' id='update-contest-starts'>
                                            <input type='text' class="form-control">
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="update-contest-finishes" class="control-label">Finishes at</label>
                                        <div class='input-group date' id='update-contest-finishes'>
                                            <input type='text' class="form-control">
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-update-contest">Update</button>
                            </div>
                        </div>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="events-view">
                <div class="container">
                    <header>
                        <h1>Events</h1>
                    </header>
                    <section>
                        <div id="themis-events">
                        </div>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="task-statistics-view">
                <div class="container">
                    <header>
                        <h1>Task statistics</h1>
                    </header>
                    <section>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="post-simplified-partial">
                <div class="themis-post">
                    <header>
                        <h3><%- title %></h3>
                    </header>
                    <section>
                        <%= description %>
                    </section>
                    <footer>
                        <p class="text-muted"><small>Updated on <%- updatedAt %></small></p>
                    </footer>
                </div>
            </script>

            <script type="text/x-template" data-name="delete-post-confirmation">
                You are about to delete the post <mark><%- title %></mark>. Continue?
            </script>

            <script type="text/x-template" data-name="revise-task-status-partial">
                <% if (solvedTeamCount === 0) { %>
                No team has solved this task yet.
                <% } else { %>
                This task has been solved by <strong><%- solvedTeamCount %></strong> <% print((solvedTeamCount > 1) ? 'teams' : 'team'); %>.
                <% } %>
                <br><br>
                <% if (ratedTeamCount > 0) { %>
                This task has been rated by <strong><%- ratedTeamCount %></strong> <% print((ratedTeamCount > 1) ? 'teams' : 'team'); %>. The average rating is <strong><%- averageRating.toFixed(2) %></strong> (5.00 max).
                <% } else { %>
                This task hasn't been rated yet.
                <% } %>
            </script>

            <script type="text/x-template" data-name="submit-task-status-partial">
                <% if (solvedTeamCount === 0) { %>
                No team has solved this task yet. Why don't you give it a try?
                <% } else { %>
                    <% if (taskSolvedAt) { %>
                        <% if (solvedTeamCount === 1) { %>
                            Your team has solved this task on <strong><%- taskSolvedAt %></strong>.<br>
                            No other team has managed to do the same.
                        <% } else { %>
                            Your team has solved this task on <strong><%- taskSolvedAt %></strong>.<br>
                            <strong><% print(solvedTeamCount - 1) %></strong> other <% print((solvedTeamCount > 2) ? 'teams have' : 'team has'); %> managed to do the same.
                        <% } %>
                    <% } else { %>
                    This task has been solved by <strong><%- solvedTeamCount %></strong> <% print((solvedTeamCount > 1) ? 'teams' : 'team'); %>. What are you waiting for?
                    <% } %>
                <% } %>
                <br><br>
                <% if (reviewCount > 0) { %>
                This task has been rated by <strong><%- reviewCount %></strong> <% print((reviewCount > 1) ? 'teams' : 'team'); %>. The average rating is <strong><%- reviewAverageRating.toFixed(2) %></strong> (5.00 max).
                <% } else { %>
                This task hasn't been rated yet.
                <% } %>
                <% if (teamReview) { %>
                <br>
                Your team has given this task <strong><%- teamReview.rating %></strong> rating <% print((teamReview.rating === 1) ? 'point' : 'points'); %> on <strong><%- teamReview.createdAt %></strong> and has made the following comment:
                <blockquote><%- teamReview.comment %></blockquote>
                <% } %>
            </script>


            <script type="text/x-template" data-name="post-partial">
                <div class="themis-post" data-id="<%- id %>">
                    <header>
                        <h3><%- title %></h3>
                    </header>
                    <section>
                        <%= description %>
                    </section>
                    <footer>
                        <p class="text-muted">
                            <small>Updated on <%- updatedAt %></small>
                            <% if (manageable) { %>
                            &nbsp;
                            <button type="button" class="btn btn-default btn-xs" data-action="edit-post" data-toggle="modal" data-target="#edit-post-modal" data-post-id="<%- id %>">
                                Edit
                            </button>
                            <button type="button" class="btn btn-danger btn-xs" data-action="delete-post" data-toggle="modal" data-target="#delete-post-modal" data-post-id="<%- id %>">
                                Delete
                            </button>
                            <% } %>
                        </p>

                    </footer>
                </div>
            </script>

            <script type="text/x-template" data-name="news-view">
                <div class="container">
                    <% if (identity.isTeam() && !identity.emailConfirmed) { %>
                    <!--=include ../partials/alert_email_verification.html -->
                    <% } %>
                    <header>
                        <h1>News</h1>
                        <% if (identity.isSupervisor()) { %>
                        <button type="button" class="btn btn-success" data-action="create-post" data-toggle="modal" data-target="#create-post-modal">
                            Create
                        </button>
                        <% } %>
                    </header>
                    <section>
                    </section>
                </div>

                <div class="modal fade" id="create-post-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Create post</h4>
                            </div>
                            <div class="modal-body">
                                <div>
                                    <ul class="nav nav-tabs" id="create-post-tablist">
                                        <li><a href="#create-post-data" role="tab" data-toggle="tab">Data</a></li>
                                        <li><a href="#create-post-preview" role="tab" data-toggle="tab">Preview</a></li>
                                    </ul>

                                    <div class="tab-content">
                                        <div role="tabpanel" class="tab-pane" id="create-post-data">
                                            <form method="POST" action="/api/post/create">
                                                <div class="form-group">
                                                    <label for="create-post-title" class="control-label">Title</label>
                                                    <input type="text" class="form-control" id="create-post-title" required minlength="2" maxlength="250" name="title">
                                                    <label for="create-post-description" class="control-label">Description</label>
                                                    <textarea class="form-control themis-post-description" id="create-post-description" required minlength="1" maxlength="4096" name="description"></textarea>
                                                </div>
                                                <div class="submit-error">
                                                    <p class="text-danger"></p>
                                                </div>
                                            </form>
                                        </div>
                                        <div role="tabpanel" class="tab-pane" id="create-post-preview">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-create-post">Create</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="delete-post-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Delete post</h4>
                            </div>
                            <div class="modal-body">
                                <p class="confirmation"></p>
                                <div class="submit-error">
                                    <p class="text-danger"></p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-danger" data-action="complete-delete-post">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="edit-post-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Edit post</h4>
                            </div>
                            <div class="modal-body">
                                <div>
                                    <ul class="nav nav-tabs" id="edit-post-tablist">
                                        <li><a href="#edit-post-data" role="tab" data-toggle="tab">Data</a></li>
                                        <li><a href="#edit-post-preview" role="tab" data-toggle="tab">Preview</a></li>
                                    </ul>

                                    <div class="tab-content">
                                        <div role="tabpanel" class="tab-pane" id="edit-post-data">
                                            <form method="POST">
                                                <div class="form-group">
                                                    <label for="edit-post-title" class="control-label">Title</label>
                                                    <input type="text" class="form-control" id="edit-post-title" required minlength="2" maxlength="250" name="title">
                                                    <label for="edit-post-description" class="control-label">Description</label>
                                                    <textarea class="form-control themis-post-description" id="edit-post-description" required minlength="1" maxlength="4096" name="description"></textarea>
                                                </div>
                                                <div class="submit-error">
                                                    <p class="text-danger"></p>
                                                </div>
                                            </form>
                                        </div>
                                        <div role="tabpanel" class="tab-pane" id="edit-post-preview">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-edit-post">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="about-view">
                <div class="container">
                    <% if (identity.isTeam() && !identity.emailConfirmed) { %>
                    <!--=include ../partials/alert_email_verification.html -->
                    <% } %>
                    <header>
                        <h1>About</h1>
                    </header>
                    <section>
                        {{#partials}}
                        {{#about}}
                        <!--=include {{{path}}} -->
                        {{/about}}
                        {{^about}}
                        <!--=include ../partials/about.html -->
                        {{/about}}
                        {{/partials}}
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="not-found-view">
                <div class="container">
                    <header>
                        <h1>Not Found</h1>
                    </header>
                    <section>
                        <p class="lead">We are really sorry, but there is no <mark><%- urlPath %></mark> page.</p>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="index-view">
                <div class="container">
                    <% if (identity.isGuest()) { %>
                    <div class="jumbotron">
                        {{#partials}}
                        {{#intro}}
                        <!--=include {{{path}}} -->
                        {{/intro}}
                        {{^intro}}
                        <!--=include ../partials/intro.html -->
                        {{/intro}}
                        {{/partials}}
                        <p>
                            <% if (!contest.isFinished()) { %>
                            <a class="btn btn-primary btn-lg" href="/team/signup" role="button" data-push-history>Sign up</a>
                            <% } %>
                            <a class="btn btn-success btn-lg" href="/team/signin" role="button" data-push-history>Sign in</a>
                        </p>
                    </div>
                    <% } else if (identity.isTeam()) { %>
                    <% if (!identity.emailConfirmed) { %>
                    <!--=include ../partials/alert_email_verification.html -->
                    <% } %>
                    <h1>Welcome back!</h1>
                    <% if (contest.isInitial()) { %>
                    <p class="lead">
                        {{#event}}{{ title }}{{/event}} hasn't started yet.
                        Now, you can check out the <a href="/news" data-push-history>news</a> or <a href="/team/<%- identity.id %>/profile" data-push-history>edit your profile</a>.
                    </p>
                    <% } else if (contest.isStarted() || contest.isPaused()) { %>
                    <p class="lead">
                        {{#event}}{{ title }}{{/event}} has begun!
                    </p>
                    <ul class="lead list-unstyled">
                        <li><a href="/news" data-push-history>Check out the news</a></li>
                        <li><a href="/scoreboard" data-push-history>View current scoreboard</a></li>
                        <li><a href="/tasks" data-push-history>Get to the tasks!</a></li>
                    </ul>
                    <% } else if (contest.isFinished()) { %>
                    <p class="lead">
                        {{#event}}{{ title }}{{/event}} has finished!
                    </p>
                    <ul class="lead list-unstyled">
                        <li><a href="/scoreboard" data-push-history>View result scoreboard</a></li>
                    </ul>
                    <p class="lead">
                        We hope you've enjoyed the <a href="/tasks" data-push-history>tasks</a>! See you the next year!
                    </p>
                    <% } %>
                    <% } else if (identity.isSupervisor()) { %>
                    <h1>Welcome back!</h1>
                    <ul class="lead list-unstyled">
                        <li><a href="/news" data-push-history>News management</a></li>
                        <li><a href="/scoreboard" data-push-history>View scoreboard</a></li>
                        <% if (identity.isAdmin()) { %>
                        <li><a href="/tasks" data-push-history>Task management</a></li>
                        <% } %>
                        <li><a href="/events" data-push-history>Realtime event log</a></li>
                    </ul>
                    <% } %>
                </div>
            </script>

            <script type="text/x-template" data-name="restore-view">
                <div class="container">
                    <form class="themis-form-restore" method="POST" action="/api/team/restore">
                        <h2>Restore password</h2>
                        <div class="alert alert-warning">
                            <span class="glyphicon glyphicon-alert"></span>&nbsp;If you have already requested password reset, please wait 10-15 minutes for email to be sent.
                        </div>
                        <label for="restore-email" class="sr-only">Email</label>
                        <input type="email" id="restore-email" name="email" class="form-control" placeholder="Email" required autofocus>
                        <div class="submit-error">
                            <p class="text-danger"></p>
                        </div>
                        <button class="btn btn-lg btn-primary btn-block" type="submit">Restore</button>
                    </form>
                    <div class="themis-alert-restore">
                        <div class="col-sm-offset-3 col-sm-9">
                            <h2>Restore password</h2>
                        </div>
                        <div class="col-sm-12 alert alert-success">
                            You will receive a email with further instructions.
                        </div>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="reset-password-view">
                <div class="container">
                    <form class="themis-form-reset" method="POST" action="/api/team/reset-password">
                        <h2>Reset password</h2>
                        <label for="reset-password" class="sr-only">Password</label>
                        <input type="password" id="reset-password" name="password" class="form-control" placeholder="Password" required minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$">
                        <label for="reset-password-confirm" class="sr-only">Confirm password</label>
                        <input type="password" id="reset-password-confirm" class="form-control" placeholder="Confirm password" required minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$" data-parsley-equalto="#reset-password">
                        <div class="submit-error">
                            <p class="text-danger"></p>
                        </div>
                        <button class="btn btn-lg btn-primary btn-block" type="submit">Reset</button>
                    </form>
                    <div class="themis-reset-error">
                        <div class="col-sm-offset-3 col-sm-9">
                            <h2>Restore password</h2>
                        </div>
                        <div class="col-sm-12 alert alert-danger">
                            Invalid reset password URL!
                        </div>
                    </div>
                    <div class="themis-reset-success">
                        <div class="col-sm-offset-3 col-sm-9">
                            <h2>Restore password</h2>
                        </div>
                        <div class="col-sm-12 alert alert-success">
                            Password has been successfully reset! Now you can <a href="/team/signin" data-push-history>sign in</a> to your account.
                        </div>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="signin-view">
                <div class="container">
                    <form class="themis-form-signin" method="POST" action="/api/team/signin">
                        <h1>Please sign in</h1>
                        <label for="signin-team" class="sr-only">Team</label>
                        <input type="text" id="signin-team" name="team" class="form-control" placeholder="Team" required autofocus minlength="2" maxlength="100">
                        <label for="signin-password" class="sr-only">Password</label>
                        <input type="password" id="signin-password" name="password" class="form-control" placeholder="Password" required minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$">
                        <div class="submit-error">
                            <p class="text-danger"></p>
                        </div>
                        <button class="btn btn-lg btn-primary btn-block" type="submit">Sign in</button>
                        <div>
                            <p class="text-center"><a href="/restore" data-push-history>Forgot password?</a></p>
                        </div>
                    </form>
                </div>
            </script>

            <script type="text/x-template" data-name="internal-error-view">
                <div class="container">
                    <header>
                        <h1>Internal error</h1>
                    </header>
                    <section>
                        <p class="lead">An internal error occured. That&#39;s all we know.</p>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="already-authenticated-view">
                <div class="container">
                    <header>
                        <h1>Already authenticated</h1>
                    </header>
                    <section>
                        <p class="lead">You have already been authenticated. Please navigate to another page.</p>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="access-forbidden-view">
                <div class="container">
                    <header>
                        <h1>Forbidden</h1>
                    </header>
                    <section>
                        <p class="lead">We are really sorry, but you are not authorized to access <mark><%- urlPath %></mark> page.</p>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="signup-not-available-view">
                <div class="container">
                    <header>
                        <h1>Signup not available</h1>
                    </header>
                    <section>
                        <p class="lead">We are really sorry, but the contest has finished.</p>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="verify-email-view">
                <div class="container">
                    <header>
                        <h1>Email verification</h1>
                    </header>
                    <section>
                        <p data-role="progress">Processing ...</p>
                        <p data-role="result"></p>
                    </section>
                </div>
            </script>

            <script type="text/x-template" data-name="team-hits-partial">
                <% if (identity.isSupervisor() || identity.isExactTeam(teamId)) { %>
                    <% if (taskNames.length > 0) { %>
                    Team has solved the following <% print((taskNames.length === 1) ? 'task' : 'tasks') %>:
                    <% for (var i=0; i<taskNames.length; ++i) { %>
                        <strong><%- taskNames[i] %></strong><% if (i < taskNames.length - 1) { %>, <% } else { %>.<% } %>
                    <% } %>
                    <% } else { %>
                    Team hasn't solved any tasks
                    <% } %>
                <% } else { %>
                    <% if (count > 0) { %>
                    Team has solved <strong><%- count %></strong> <% print((count === 1) ? 'task' : 'tasks') %>
                    <% } else { %>
                    Team hasn't solved any tasks
                    <% } %>
                <% } %>
            </script>

            <script type="text/x-template" data-name="team-profile-partial">
                <div class="clearfix themis-profile">
                    <div class="pull-left logo">
                        <% if (identity.isExactTeam(team.id)) { %>
                        <a href="#" title="Click to upload new logo" data-action="upload-logo" data-toggle="modal" data-target="#upload-logo-modal">
                            <img class="img-thumbnail" src="/api/team/<%- team.id %>/logo">
                        </a>
                        <% } else { %>
                            <img class="img-thumbnail" src="/api/team/<%- team.id %>/logo">
                        <% } %>
                    </div>
                    <div class="pull-left info">
                        <h4 class="text-primary">
                            <%- team.name %>
                            <% if (team.disqualified) { %>&nbsp;<span class="label label-danger">disqualified</span><% } %>
                        </h4>
                        <% if (identity.isExactTeam(team.id) || identity.isSupervisor()) { %>
                        <ul class="list-unstyled">
                            <% if ('email' in team && 'emailConfirmed' in team) { %>
                            <li>
                                <span class="glyphicon glyphicon-envelope"></span>
                                <% if (team.emailConfirmed) { %>
                                <span class="text-success" title="Email verified"><%- team.email %></span>
                                <% } else { %>
                                <span class="text-danger" title="Email not verified"><%- team.email %></span>
                                <% if (identity.isExactTeam(team.id)) { %>
                                <br>
                                <button type="button" class="btn btn-default btn-sm" data-action="resend-confirmation" data-toggle="modal" data-target="#resend-confirmation-modal">Resend confirmation email</button>
                                <button type="button" class="btn btn-warning btn-sm" data-action="change-email" data-toggle="modal" data-target="#change-email-modal">Change email</button>
                                <% } %>
                                <% } %>
                            </li>
                            <% } %>
                        </ul>
                        <% } %>
                        <ul class="list-unstyled">
                            <% if (country !== '' || identity.isExactTeam(team.id)) { %>
                            <li><strong>Country:</strong> <%- country %></li>
                            <% } %>
                            <% if (team.locality !== '' || identity.isExactTeam(team.id)) { %>
                            <li><strong>Locality:</strong> <%- team.locality %></li>
                            <% } %>
                            <% if (team.institution !== '' || identity.isExactTeam(team.id)) { %>
                            <li><strong>Institution:</strong> <%- team.institution %></li>
                            <% } %>
                            <% if (identity.isExactTeam(team.id)) { %>
                            <li>
                                <button type="button" class="btn btn-default btn-sm" data-action="edit-profile" data-toggle="modal" data-target="#edit-profile-modal">
                                    Edit
                                </button>
                                <button type="button" class="btn btn-default btn-sm" data-action="change-password" data-toggle="modal" data-target="#change-password-modal">
                                    Change password
                                </button>
                            </li>
                            <% } %>
                        </ul>
                        <% if (teamHitsInfo) { %>
                        <p class="text-muted">
                            <%= teamHitsInfo %>
                        </p>
                        <% } %>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="profile-view">
                <div class="container">
                    <% if (identity.isTeam() && !identity.emailConfirmed) { %>
                    <!--=include ../partials/alert_email_verification.html -->
                    <% } %>
                    <header>
                        <h1>Team profile</h1>
                    </header>
                    <section>
                    </section>
                </div>

                <div class="modal fade" id="upload-logo-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Upload logo</h4>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="/api/team/update-logo">
                                    <div class="form-group">
                                        <label for="upload-logo-logo" class="control-label">Logo</label>
                                        <input type="file" id="upload-logo-logo" name="logo" class="filestyle" data-buttonText="&nbsp;Choose file" data-iconName="glyphicon-picture" accept="image/jpeg,image/png,image/gif" required data-parsley-errors-container="#upload-logo-errors">
                                        <div id="upload-logo-errors">
                                        </div>
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-upload-logo">Upload</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="resend-confirmation-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Resend confirmation email</h4>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="/api/team/resend-confirmation-email">
                                    <div class="form-group">
                                        <label for="resend-confirmation-email" class="control-label">Email</label>
                                        <input type="email" class="form-control" id="resend-confirmation-email" disabled>
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                    <div class="submit-success">
                                        <p class="text-success"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-resend-confirmation">Resend</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="change-email-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Change email</h4>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="/api/team/update-email">
                                    <div class="form-group">
                                        <label for="change-email-new" class="control-label">New email</label>
                                        <input type="email" class="form-control" id="change-email-new" name="email" required autofocus>
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-change-email">Change</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="edit-profile-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Edit profile</h4>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="/api/team/update-profile">
                                    <div class="form-group">
                                        <label for="edit-profile-country" class="control-label">Country</label>
                                        <select required class="form-control" id="edit-profile-country" name="countryId" autofocus></select>
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-profile-locality" class="control-label">Locality</label>
                                        <input type="text" class="form-control" id="edit-profile-locality" name="locality">
                                    </div>
                                    <div class="form-group">
                                        <label for="edit-profile-institution" class="control-label">Institution</label>
                                        <input type="text" class="form-control" id="edit-profile-institution" name="institution">
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-edit-profile">Change</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="change-password-modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Change password</h4>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="/api/team/update-password">
                                    <div class="form-group">
                                        <label for="change-pwd-current" class="control-label">Current password</label>
                                        <input type="password" class="form-control" id="change-pwd-current" name="currentPassword" required autofocus minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$">
                                    </div>
                                    <div class="form-group">
                                        <label for="change-pwd-new" class="control-label">New password</label>
                                        <input type="password" class="form-control" id="change-pwd-new" name="newPassword" required minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$">
                                    </div>
                                    <div class="form-group">
                                        <label for="change-pwd-confirm-new" class="control-label">Confirm new password</label>
                                        <input type="password" class="form-control" id="change-pwd-confirm-new" required minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$" data-parsley-equalto="#change-pwd-new">
                                    </div>
                                    <div class="submit-error">
                                        <p class="text-danger"></p>
                                    </div>
                                    <div class="submit-success">
                                        <p class="text-success"></p>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" data-action="complete-change-password">Change</button>
                            </div>
                        </div>
                    </div>
                </div>
            </script>

            <script type="text/x-template" data-name="login-view">
                <div class="container">
                    <form class="themis-form-login" method="POST" action="/api/supervisor/signin">
                        <h1>Please log in</h1>
                        <label for="login-team" class="sr-only">Username</label>
                        <input type="text" id="login-username" name="username" class="form-control" placeholder="Username" required autofocus minlength="2" maxlength="100">
                        <label for="login-password" class="sr-only">Password</label>
                        <input type="password" id="login-password" name="password" class="form-control" placeholder="Password" required minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$">
                        <div class="submit-error">
                            <p class="text-danger"></p>
                        </div>
                        <button class="btn btn-lg btn-primary btn-block" type="submit">Log in</button>
                    </form>
                </div>
            </script>

            <script type="text/x-template" data-name="signup-view">
                <div class="container">
                    <form class="form-horizontal themis-form-signup" method="POST" enctype="multipart/form-data" action="/api/team/signup">
                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-9">
                                <h1>Sign up</h1>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="signup-team" class="col-sm-3 control-label">
                                Team&nbsp;<sup>*</sup>
                            </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="signup-team" name="team" placeholder="Team" required autofocus minlength="2" maxlength="100">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="signup-email" class="col-sm-3 control-label">
                                Email&nbsp;<sup>*</sup>
                            </label>
                            <div class="col-sm-9">
                                <input type="email" class="form-control" id="signup-email" name="email" placeholder="Email" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="signup-password" class="col-sm-3 control-label">
                                Password&nbsp;<sup>*</sup>
                            </label>
                            <div class="col-sm-9">
                                <input type="password" class="form-control" id="signup-password" name="password" placeholder="Password" required minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="signup-password-confirm" class="col-sm-3 control-label">
                                Confirm password&nbsp;<sup>*</sup>
                            </label>
                            <div class="col-sm-9">
                                <input type="password" class="form-control" id="signup-password-confirm" placeholder="Confirm password" required minlength="6" maxlength="40" pattern="^[A-Za-z0-9\x5b\x5d\x28\x29\x7b\x7d\x7e\x60\x21\x40\x23\x24\x25\x5e\x26\x2a\x2d\x5f\x3d\x2b\x27\x22\x3a\x3b\x7c\x2f\x5c\x2e\x2c\x3f\x3c\x3e]+$" data-parsley-equalto="#signup-password">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="signup-logo" class="col-sm-3 control-label">
                                Logo&nbsp;<sup>*</sup>
                            </label>
                            <div class="col-sm-9">
                                <input type="file" id="signup-logo" name="logo" class="filestyle" data-buttonText="&nbsp;Choose file" data-iconName="glyphicon-picture" accept="image/jpeg,image/png,image/gif" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="signup-country" class="col-sm-3 control-label">
                                Country&nbsp;<sup>*</sup>
                            </label>
                            <div class="col-sm-9">
                                <select required class="form-control" id="signup-country" name="countryId">
                                    <% for (var i=0; i<countries.length; ++i) { %>
                                    <option value="<%- countries[i].id %>"><%- countries[i].getFullName() %></option>
                                    <% } %>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="signup-locality" class="col-sm-3 control-label">
                                Locality
                            </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="signup-locality" name="locality" placeholder="Locality">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="signup-institution" class="col-sm-3 control-label">
                                Institution
                            </label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="signup-institution" name="institution" placeholder="Institution">
                            </div>
                        </div>

                        <div class="col-sm-offset-3 col-sm-9 submit-error">
                            <p class="text-danger"></p>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-9">
                                <button type="submit" class="btn btn-primary btn-lg">Sign up</button>
                            </div>
                        </div>
                    </form>

                    <div class="themis-alert-signup">
                        <div class="col-sm-offset-3 col-sm-9">
                            <h1>Sign up</h1>
                        </div>
                        <div class="col-sm-12 alert alert-success">
                            You have successfully signed up for the contest!
                            Now, you can <a href="/team/signin" data-push-history>sign in</a> to your account.
                        </div>
                    </div>
                </div>
            </script>
        </div>

        <script src="/assets/js/{{#cachebusting}}{{#themis}}{{ js }}{{/themis}}{{/cachebusting}}"></script>
    </body>
</html>
